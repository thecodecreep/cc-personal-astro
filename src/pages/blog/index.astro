---
import BlogPreview from "../../components/BlogPreview.astro";
import Layout from "../../layouts/layout.astro";
import "../../styles/global.css";
const title = "CodeCreep Blog";
const description = "An idiots musings";
// Data Fetching: List all Markdown posts in the repo.
const allPosts = await Astro.glob("./posts/*.md");
const sortedPosts = allPosts
  .sort(
    (a, b) =>
      new Date(b.frontmatter.date).valueOf() -
      new Date(a.frontmatter.date).valueOf()
  )
  .filter((p) => p.frontmatter.hidden !== true);
---

<Layout title={title} description={description}>
  <div class="page flex h-full w-full flex-col items-center">
    <h1 class="pt-2 font-alagard text-4xl font-bold text-white">Blog</h1>
    <p class="text-center text-xl">
      Sometimes I'll write down my thoughts on the tech I have been using or the
      projects I have been working on.
    </p>
    <div
      class="grid w-full grid-cols-1 gap-4 p-4 lg:grid-cols-2 lg:p-8 xl:gap-8"
    >
      {sortedPosts.map((post) => <BlogPreview post={post} />)}
    </div>
  </div>
</Layout>
